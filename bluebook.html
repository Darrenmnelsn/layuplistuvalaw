<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LayupList ‚Äì UVA Law Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="bg-slate-950">
    <div id="root"></div>

    <script type="text/babel">

const schedule = [
  {
    semester: "1L Fall",
    courses: [
      { name: "Contracts", credits: 4, gpa: 3.5 },
      { name: "Torts", credits: 4, gpa: 3.5 },
      { name: "Civil Procedure", credits: 4, gpa: 3.5 },
    ],
  },
  {
    semester: "1L Spring Option 1 (Litigation)",
    courses: [
      { name: "Con Law", credits: 4, gpa: 3.5 },
      { name: "Evidence", credits: 4, gpa: 3.6 },
      { name: "Professional Responsibility", credits: 3, gpa: 3.65 },
    ],
  },
  {
    semester: "1L Spring Option 2 (Business)",
    courses: [
      { name: "Con Law", credits: 4, gpa: 3.5 },
      { name: "Corporations", credits: 4, gpa: 3.7 },
      { name: "Intro to Law & Business", credits: 3, gpa: 3.65 },
    ],
  },
  {
    semester: "2L Fall",
    courses: [
      { name: "Corporations / Business Associations", credits: 4, gpa: 3.7 },
      { name: "Federal Income Tax", credits: 3, gpa: 3.7 },
      { name: "Optional Elective", credits: 2, gpa: 3.55 },
    ],
  },
  {
    semester: "2L Spring",
    courses: [
      { name: "Bankruptcy / Corporate Finance", credits: 4, gpa: 3.65 },
      { name: "Deals / M&A", credits: 3, gpa: 3.7 },
      { name: "Optional Seminar", credits: 2, gpa: 3.6 },
    ],
  },
  {
    semester: "3L Fall",
    courses: [
      { name: "Corporate Law Seminar", credits: 4, gpa: 3.7 },
      { name: "Tax & Business", credits: 3, gpa: 3.7 },
      { name: "Optional Seminar / Independent Study", credits: 2, gpa: 3.6 },
    ],
  },
  {
    semester: "3L Spring",
    courses: [
      { name: "Trial / Advocacy Clinic", credits: 4, gpa: 3.55 },
      { name: "Legal History / Policy Seminar", credits: 3, gpa: 3.6 },
      { name: "Optional Elective", credits: 2, gpa: 3.65 },
    ],
  },
];

const ADMIN_ACCOUNTS = [{ username: "bte4wz", password: "bte4wz2028" }];
const PROFESSOR_STORAGE_KEY = "layuplist:professors";
const PENDING_REVIEWS_KEY = "layuplist:pendingReviews";
const AUTH_STORAGE_KEY = "layuplist:isAuthed";

const defaultProfessors = [
  {
    name: "Kenneth S. Abraham",
    courses: ["Torts (LAW 6007)", "1L Torts"],
    gpa: 3.45,
    reviews: [
      { student: "1L Fall 2023", text: "Legendary torts scholar; lectures are clear but his issue-spotter exams bite." },
      { student: "Forum Roundup", text: "Curve feels moderate‚Äîprep matters more than outline swapping." },
    ],
  },
  {
    name: "Alice Abrokwa",
    courses: ["Civil Procedure", "Disability Law"],
    gpa: 3.4,
    reviews: [
      { student: "1L Section FG", text: "Energetic classes with lots of cold calls but incredibly fair feedback." },
      { student: "Reddit Tip", text: "Rigorous yet supportive‚Äîyou leave Civ Pro actually understanding Erie." },
    ],
  },
  {
    name: "Payvand Ahdout",
    courses: ["Federal Courts", "Separation of Powers Seminar"],
    gpa: 3.42,
    reviews: [
      { student: "Spring 2025", text: "Federal Courts is brutal if you take it early‚Äîreading load is no joke." },
      { student: "3L Clerkship Prep", text: "Phenomenal scholar; come ready for constitutional nuance." },
    ],
  },
  {
    name: "Lori Alvino McGill",
    courses: ["Legal Writing", "Lawyering Skills"],
    gpa: 3.55,
    reviews: [
      { student: "1L Writing Section", text: "Extremely hands-on with memos and briefs; comments are gold." },
      { student: "Clinic Alum", text: "Professionalism focus helps during summer gigs." },
    ],
  },
  {
    name: "Temi Anderson",
    courses: ["Legal Research & Writing II"],
    gpa: 3.55,
    reviews: [
      { student: "Writing Partner", text: "Keeps LRW fast-paced but checks in constantly." },
      { student: "1L Feedback", text: "Detailed edits make your writing tighten up quickly." },
    ],
  },
  {
    name: "Nina-Alice Antony",
    courses: ["Legal Analysis & Communication"],
    gpa: 3.5,
    reviews: [
      { student: "LAC Section", text: "Supportive writing coach‚Äîgreat at demystifying UVA‚Äôs memo format." },
      { student: "Peer Mentor", text: "Expect weekly check-ins and quick turnaround on drafts." },
    ],
  },
  {
    name: "Barbara E. Armacost",
    courses: ["Torts", "Pretrial Litigation"],
    gpa: 3.45,
    reviews: [
      { student: "1L 2023", text: "Caring but demanding‚Äîher torts hypotheticals get everyone talking." },
      { student: "Clinic Student", text: "Approachable outside class and generous with practice exams." },
    ],
  },
  {
    name: "Anthony A. Arsali",
    courses: ["Legal Writing I", "Legal Writing II"],
    gpa: 3.6,
    reviews: [
      { student: "Writing Section", text: "Promotes practical drafting habits drawn from practice." },
      { student: "Partner Feedback", text: "Chill but thorough‚Äîgreat for nervous 1Ls." },
    ],
  },
  {
    name: "Scott Ballenger",
    courses: ["Appellate Litigation Clinic"],
    gpa: 3.5,
    reviews: [
      { student: "Clinic Alum", text: "Clinic is the real deal‚ÄîBallenger sharpens briefs line by line." },
      { student: "Moot Court Captain", text: "Expect hands-on feedback and partnerships with real clients." },
    ],
  },
  {
    name: "Aditya Bamzai",
    courses: ["Administrative Law", "Constitutional Law"],
    gpa: 3.4,
    reviews: [
      { student: "Admin Law 2L", text: "Hypotheticals nonstop‚Äîfantastic prep for finals." },
      { student: "Small Group", text: "Explains separation of powers like a podcast host." },
    ],
  },
  {
    name: "Josh Bowers",
    courses: ["Criminal Law", "Criminal Procedure"],
    gpa: 3.45,
    reviews: [
      { student: "1L Spring", text: "Creative, Socratic, and brutally honest about doctrine." },
      { student: "Public Defender Track", text: "Demanding but inspiring‚Äîclasses fill instantly." },
    ],
  },
  {
    name: "Darryl K. Brown",
    courses: ["Criminal Law", "Evidence"],
    gpa: 3.45,
    reviews: [
      { student: "Fall 2024", text: "Clear explanations of doctrine + policy; fair cold calls." },
      { student: "JAG Scholar", text: "Balances theory and real-world perspectives brilliantly." },
    ],
  },
  {
    name: "Jay Butler",
    courses: ["Contracts", "Conflict of Laws", "Trial Advocacy"],
    gpa: 3.43,
    reviews: [
      { student: "Contracts Section J", text: "Engaging 1L professor‚Äîorganized slides and humor." },
      { student: "Trial Ad Alum", text: "Practical advocacy drills in every class." },
    ],
  },
  {
    name: "Naomi R. Cahn",
    courses: ["Family Law", "Gender & the Law"],
    gpa: 3.4,
    reviews: [
      { student: "Family Law 2L", text: "Brings decades of scholarship into each discussion." },
      { student: "Clinic Partner", text: "Supportive and deeply knowledgeable about caregiving policy." },
    ],
  },
  {
    name: "Danielle K. Citron",
    courses: ["Cybersecurity Law", "Privacy Law"],
    gpa: 3.42,
    reviews: [
      { student: "Cybersecurity Law", text: "Cutting-edge materials; expect rigorous reading assignments." },
      { student: "Tech Policy Fellow", text: "One of UVA‚Äôs stars‚Äîshe connects doctrine to real cases." },
    ],
  },
  {
    name: "George M. Cohen",
    courses: ["Contracts", "Business Associations"],
    gpa: 3.4,
    reviews: [
      { student: "1L Contracts A", text: "Kind, methodical, and committed to making the UCC approachable." },
      { student: "BA Elective", text: "Great at connecting doctrine to practice problems." },
    ],
  },
  {
    name: "Michael G. Collins",
    courses: ["Conflict of Laws", "International Law"],
    gpa: 3.4,
    reviews: [
      { student: "Conflict of Laws", text: "Dense material but Collins keeps it narrative-driven." },
      { student: "3L Elective", text: "Expect theoretical depth plus old-school UVA charm." },
    ],
  },
  {
    name: "Ashley S. Deeks",
    courses: ["National Security Law", "Cybersecurity Law"],
    gpa: 3.4,
    reviews: [
      { student: "NatSec 3L", text: "Government perspective is invaluable; classes full of current events." },
      { student: "Cyber Law Seminar", text: "Reading-intensive but worth it for policy-minded students." },
    ],
  },
];

const GPA_BUCKETS = [
  { min: 3.65, label: "3.65 ‚Äì 3.75", color: "#006400" },
  { min: 3.55, label: "3.55 ‚Äì 3.64", color: "#90EE90" },
  { min: 3.45, label: "3.45 ‚Äì 3.54", color: "#FFFF99" },
  { min: 3.35, label: "3.35 ‚Äì 3.44", color: "#FFA500" },
  { min: -Infinity, label: "< 3.35", color: "#FF6347" },
];

const gpaToColor = (gpa) => GPA_BUCKETS.find((bucket) => gpa >= bucket.min)?.color ?? "#CCCCCC";

const MAX_CREDITS = Math.max(
  12,
  ...schedule.map((semester) => semester.courses.reduce((sum, course) => sum + course.credits, 0)),
);

function LayupList() {
  const [searchTerm, setSearchTerm] = React.useState("");
  const [professorData, setProfessorData] = React.useState(() => {
    const stored = localStorage.getItem(PROFESSOR_STORAGE_KEY);
    try {
      return stored ? JSON.parse(stored) : defaultProfessors;
    } catch (error) {
      console.warn("Failed to parse stored professors", error);
      return defaultProfessors;
    }
  });
  const [isAuthed, setIsAuthed] = React.useState(() => localStorage.getItem(AUTH_STORAGE_KEY) === "true");
  const [loginForm, setLoginForm] = React.useState({ username: "", password: "", error: "" });
  const [isLoginFormVisible, setIsLoginFormVisible] = React.useState(false);
  const [pendingReviews, setPendingReviews] = React.useState(() => {
    const stored = localStorage.getItem(PENDING_REVIEWS_KEY);
    try {
      return stored ? JSON.parse(stored) : [];
    } catch (error) {
      console.warn("Failed to parse pending reviews", error);
      return [];
    }
  });
  const [showGuestForm, setShowGuestForm] = React.useState(false);
  const [guestReview, setGuestReview] = React.useState({ professorName: "", student: "", text: "" });
  const [newProfessor, setNewProfessor] = React.useState({
    name: "",
    courses: "",
    gpa: "",
    reviewer: "",
    review: "",
  });
  const [newReview, setNewReview] = React.useState({ professorName: "", student: "", text: "" });
  const [formMessage, setFormMessage] = React.useState("");

  React.useEffect(() => {
    localStorage.setItem(PROFESSOR_STORAGE_KEY, JSON.stringify(professorData));
  }, [professorData]);
  React.useEffect(() => {
    localStorage.setItem(PENDING_REVIEWS_KEY, JSON.stringify(pendingReviews));
  }, [pendingReviews]);

  const professorsByGpa = React.useMemo(() => [...professorData].sort((a, b) => b.gpa - a.gpa), [professorData]);
  const filteredProfessors = React.useMemo(() => {
    const query = searchTerm.trim().toLowerCase();
    if (!query) return professorsByGpa;
    return professorsByGpa.filter((professor) => {
      const inName = professor.name.toLowerCase().includes(query);
      const inCourse = professor.courses.some((course) => course.toLowerCase().includes(query));
      return inName || inCourse;
    });
  }, [professorsByGpa, searchTerm]);

  const handleLogin = (event) => {
    event.preventDefault();
    const { username, password } = loginForm;
    const valid = ADMIN_ACCOUNTS.some((account) => account.username === username && account.password === password);
    if (valid) {
      setIsAuthed(true);
      localStorage.setItem(AUTH_STORAGE_KEY, "true");
      setLoginForm({ username: "", password: "", error: "" });
      setIsLoginFormVisible(false);
    } else {
      setLoginForm((prev) => ({ ...prev, error: "Invalid credentials. Please try again." }));
    }
  };

  const handleLogout = () => {
    setIsAuthed(false);
    localStorage.removeItem(AUTH_STORAGE_KEY);
  };

  const handleNewProfessorChange = (event) => {
    const { name, value } = event.target;
    setNewProfessor((prev) => ({ ...prev, [name]: value }));
  };

  const handleNewReviewChange = (event) => {
    const { name, value } = event.target;
    setNewReview((prev) => ({ ...prev, [name]: value }));
  };

  const handleAddProfessor = (event) => {
    event.preventDefault();
    setFormMessage("");
    if (!newProfessor.name || !newProfessor.courses || !newProfessor.gpa || !newProfessor.reviewer || !newProfessor.review) {
      setFormMessage("Please fill in every field before adding a professor.");
      return;
    }

    const parsedGpa = parseFloat(newProfessor.gpa);
    if (Number.isNaN(parsedGpa)) {
      setFormMessage("GPA must be a number.");
      return;
    }

    const courses = newProfessor.courses.split(",").map((course) => course.trim()).filter(Boolean);
    if (courses.length === 0) {
      setFormMessage("Include at least one course (comma-separated).");
      return;
    }

    const alreadyExists = professorData.some((professor) => professor.name.toLowerCase() === newProfessor.name.toLowerCase());
    if (alreadyExists) {
      setFormMessage("That professor already exists. Add a review instead.");
      return;
    }

    const newProfile = {
      name: newProfessor.name.trim(),
      courses,
      gpa: parsedGpa,
      reviews: [{ student: newProfessor.reviewer.trim(), text: newProfessor.review.trim() }],
    };

    setProfessorData((prev) => [...prev, newProfile]);
    setNewProfessor({ name: "", courses: "", gpa: "", reviewer: "", review: "" });
    setFormMessage("Professor added successfully.");
  };

  const handleAddReview = (event) => {
    event.preventDefault();
    setFormMessage("");
    const { professorName, student, text } = newReview;
    if (!professorName || !student || !text) {
      setFormMessage("Provide the professor, student name, and review text.");
      return;
    }

    setProfessorData((prev) =>
      prev.map((professor) => {
        if (professor.name === professorName) {
          return {
            ...professor,
            reviews: [...professor.reviews, { student: student.trim(), text: text.trim() }],
          };
        }
        return professor;
      }),
    );
    setNewReview({ professorName: "", student: "", text: "" });
    setFormMessage("Review added successfully.");
  };

  const handleGuestReviewChange = (event) => {
    const { name, value } = event.target;
    setGuestReview((prev) => ({ ...prev, [name]: value }));
  };

  const handleGuestReviewSubmit = (event) => {
    event.preventDefault();
    if (!guestReview.professorName || !guestReview.student || !guestReview.text) return;
    setPendingReviews((prev) => [...prev, guestReview]);
    setGuestReview({ professorName: "", student: "", text: "" });
    setShowGuestForm(false);
  };

  const handleApprovePending = (index) => {
    const submission = pendingReviews[index];
    const { professorName, student, text } = submission;
    const exists = professorData.some((professor) => professor.name === professorName);
    if (!exists) {
      alert(`Professor "${professorName}" not found. Add the profile first, then approve this review.`);
      return;
    }
    setProfessorData((prev) =>
      prev.map((professor) => {
        if (professor.name === professorName) {
          return {
            ...professor,
            reviews: [...professor.reviews, { student, text }],
          };
        }
        return professor;
      }),
    );
    setPendingReviews((prev) => prev.filter((_, idx) => idx !== index));
  };

  const handleDismissPending = (index) => {
    setPendingReviews((prev) => prev.filter((_, idx) => idx !== index));
  };

  const handleDeleteProfessor = (name) => {
    if (!window.confirm(`Remove ${name} from LayupList?`)) return;
    setProfessorData((prev) => prev.filter((professor) => professor.name !== name));
  };

  const handleDeleteReview = (professorName, reviewIndex) => {
    setProfessorData((prev) =>
      prev.map((professor) => {
        if (professor.name === professorName) {
          const nextReviews = professor.reviews.filter((_, idx) => idx !== reviewIndex);
          return { ...professor, reviews: nextReviews };
        }
        return professor;
      }),
    );
  };

  return (
    <div className="min-h-screen bg-gradient-to-b from-slate-950 via-slate-900 to-slate-800 text-slate-100 px-6 py-12">
      <div className="mx-auto max-w-5xl space-y-10">
        <header className="space-y-6">
          <div className="relative flex justify-center">
            <div className="absolute left-0 top-0 text-left">
              {isAuthed ? (
                <div className="rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-xs text-slate-200">
                  <p className="font-semibold text-white">Admin mode</p>
                  <button
                    className="mt-1 w-full rounded-lg border border-white/20 px-2 py-1 text-[11px] text-slate-100 hover:border-orange-300 hover:text-white"
                    onClick={handleLogout}
                  >
                    Log out
                  </button>
                </div>
              ) : (
                <div>
                  <button
                    className="rounded-lg border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-white hover:border-orange-300"
                    onClick={() => setIsLoginFormVisible((prev) => !prev)}
                  >
                    Log in
                  </button>
                  {isLoginFormVisible && (
                    <form
                      onSubmit={handleLogin}
                      className="mt-2 w-48 space-y-1 rounded-xl border border-white/10 bg-white/5 p-3 text-xs text-slate-200"
                    >
                      <input
                        type="text"
                        placeholder="Username"
                        value={loginForm.username}
                        onChange={(event) => setLoginForm((prev) => ({ ...prev, username: event.target.value }))}
                        className="w-full rounded-lg border border-white/10 bg-slate-950/40 px-2 py-1 text-xs text-white placeholder:text-slate-500"
                        required
                      />
                      <input
                        type="password"
                        placeholder="Password"
                        value={loginForm.password}
                        onChange={(event) => setLoginForm((prev) => ({ ...prev, password: event.target.value }))}
                        className="w-full rounded-lg border border-white/10 bg-slate-950/40 px-2 py-1 text-xs text-white placeholder:text-slate-500"
                        required
                      />
                      {loginForm.error && <p className="text-[11px] text-red-400">{loginForm.error}</p>}
                      <button
                        type="submit"
                        className="w-full rounded-lg bg-orange-500 py-1 text-xs font-semibold text-white transition hover:bg-orange-600"
                      >
                        Submit
                      </button>
                    </form>
                  )}
                </div>
              )}
            </div>
            <div className="text-center">
              <p className="text-sm tracking-wide uppercase text-orange-400">LayupList</p>
              <h1 className="text-3xl font-bold text-white sm:text-4xl">UVA Law LayupList</h1>
            </div>
          </div>

          <div className="space-y-3">
            <label htmlFor="prof-search" className="sr-only">
              Search professors or courses
            </label>
            <div className="relative mx-auto max-w-2xl">
              <span className="pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 text-slate-500">üîç</span>
              <input
                id="prof-search"
                type="search"
                placeholder="Search professors or courses‚Ä¶"
                value={searchTerm}
                onChange={(event) => setSearchTerm(event.target.value)}
                className="w-full rounded-2xl border border-white/10 bg-white/5 px-12 py-4 text-base text-white placeholder:text-slate-400 focus:border-orange-300 focus:outline-none focus:ring-2 focus:ring-orange-400/40"
              />
            </div>
            <p className="mt-3 text-center text-sm text-slate-400">
              {searchTerm.trim()
                ? `Showing ${filteredProfessors.length} result${filteredProfessors.length === 1 ? "" : "s"}`
                : `Enter a professor or course to display profiles`}
            </p>
            <div className="text-center">
              <button
                className="rounded-lg border border-white/20 px-4 py-2 text-xs font-semibold text-white hover:border-orange-300"
                onClick={() => setShowGuestForm((prev) => !prev)}
              >
                Submit review as guest
              </button>
            </div>
            {showGuestForm && (
              <form
                onSubmit={handleGuestReviewSubmit}
                className="mx-auto flex max-w-2xl flex-col gap-2 rounded-2xl border border-white/10 bg-white/5 p-4 text-left text-xs text-white"
              >
                <input
                  type="text"
                  name="professorName"
                  value={guestReview.professorName}
                  onChange={handleGuestReviewChange}
                  placeholder="Professor name"
                  className="rounded-xl border border-white/10 bg-slate-950/40 px-3 py-2 text-sm text-white placeholder:text-slate-500"
                  required
                />
                <input
                  type="text"
                  name="student"
                  value={guestReview.student}
                  onChange={handleGuestReviewChange}
                  placeholder="Your name"
                  className="rounded-xl border border-white/10 bg-slate-950/40 px-3 py-2 text-sm text-white placeholder:text-slate-500"
                  required
                />
                <textarea
                  name="text"
                  value={guestReview.text}
                  onChange={handleGuestReviewChange}
                  placeholder="Review details"
                  className="rounded-xl border border-white/10 bg-slate-950/40 px-3 py-2 text-sm text-white placeholder:text-slate-500"
                  rows="4"
                  required
                />
                <button
                  type="submit"
                  className="rounded-xl bg-teal-500 py-2 text-sm font-semibold text-white transition hover:bg-teal-600"
                >
                  Send for approval
                </button>
              </form>
            )}
          </div>
        </header>

        {isAuthed && (
          <section className="rounded-3xl border border-white/10 bg-white/5 p-6 shadow-xl shadow-black/30">
            <div className="space-y-6">
              <div className="flex flex-wrap items-center justify-between gap-3">
                <div>
                  <p className="text-xs uppercase tracking-wide text-orange-300">Admin Mode</p>
                  <h2 className="text-2xl font-semibold text-white">Add Professors & Reviews</h2>
                  <p className="text-sm text-slate-300">Add-only access keeps existing data safe.</p>
                </div>
              </div>

              <div className="grid gap-6 md:grid-cols-2">
                <form onSubmit={handleAddProfessor} className="space-y-3 rounded-2xl border border-white/10 bg-slate-900/50 p-4">
                  <h3 className="text-lg font-semibold text-white">Add Professor</h3>
                  <input
                    type="text"
                    name="name"
                    value={newProfessor.name}
                    onChange={handleNewProfessorChange}
                    placeholder="Professor name"
                    className="w-full rounded-xl border border-white/10 bg-slate-950/40 px-3 py-2 text-sm text-white placeholder:text-slate-500"
                    required
                  />
                  <input
                    type="text"
                    name="courses"
                    value={newProfessor.courses}
                    onChange={handleNewProfessorChange}
                    placeholder="Courses (comma-separated)"
                    className="w-full rounded-xl border border-white/10 bg-slate-950/40 px-3 py-2 text-sm text-white placeholder:text-slate-500"
                    required
                  />
                  <input
                    type="number"
                    name="gpa"
                    step="0.001"
                    value={newProfessor.gpa}
                    onChange={handleNewProfessorChange}
                    placeholder="Median GPA"
                    className="w-full rounded-xl border border-white/10 bg-slate-950/40 px-3 py-2 text-sm text-white placeholder:text-slate-500"
                    required
                  />
                  <input
                    type="text"
                    name="reviewer"
                    value={newProfessor.reviewer}
                    onChange={handleNewProfessorChange}
                    placeholder="First review ‚Äì student name"
                    className="w-full rounded-xl border border-white/10 bg-slate-950/40 px-3 py-2 text-sm text-white placeholder:text-slate-500"
                    required
                  />
                  <textarea
                    name="review"
                    value={newProfessor.review}
                    onChange={handleNewProfessorChange}
                    placeholder="First review text"
                    className="w-full rounded-xl border border-white/10 bg-slate-950/40 px-3 py-2 text-sm text-white placeholder:text-slate-500"
                    rows="3"
                    required
                  />
                  <button
                    type="submit"
                    className="w-full rounded-xl bg-orange-500 py-2 text-sm font-semibold text-white transition hover:bg-orange-600"
                  >
                    Add Professor
                  </button>
                </form>

                <form onSubmit={handleAddReview} className="space-y-3 rounded-2xl border border-white/10 bg-slate-900/50 p-4">
                  <h3 className="text-lg font-semibold text-white">Add Review</h3>
                  <select
                    name="professorName"
                    value={newReview.professorName}
                    onChange={handleNewReviewChange}
                    className="w-full rounded-xl border border-white/10 bg-slate-950/40 px-3 py-2 text-sm text-white"
                    required
                  >
                    <option value="">Select professor‚Ä¶</option>
                    {professorData.map((professor) => (
                      <option key={`review-${professor.name}`} value={professor.name}>
                        {professor.name}
                      </option>
                    ))}
                  </select>
                  <input
                    type="text"
                    name="student"
                    value={newReview.student}
                    onChange={handleNewReviewChange}
                    placeholder="Student name"
                    className="w-full rounded-xl border border-white/10 bg-slate-950/40 px-3 py-2 text-sm text-white placeholder:text-slate-500"
                    required
                  />
                  <textarea
                    name="text"
                    value={newReview.text}
                    onChange={handleNewReviewChange}
                    placeholder="Review text"
                    className="w-full rounded-xl border border-white/10 bg-slate-950/40 px-3 py-2 text-sm text-white placeholder:text-slate-500"
                    rows="4"
                    required
                  />
                  <button
                    type="submit"
                    className="w-full rounded-xl bg-teal-500 py-2 text-sm font-semibold text-white transition hover:bg-teal-600"
                  >
                    Add Review
                  </button>
                </form>
              </div>

              {formMessage && <p className="text-sm text-orange-300">{formMessage}</p>}

              {pendingReviews.length > 0 && (
                <div className="rounded-2xl border border-white/10 bg-slate-900/40 p-4">
                  <p className="text-xs uppercase tracking-wide text-orange-300">Guest submissions</p>
                  <div className="mt-3 space-y-3">
                    {pendingReviews.map((submission, idx) => (
                      <div key={`pending-${idx}`} className="rounded-xl border border-white/10 bg-white/5 p-3 text-sm">
                        <p className="font-semibold text-white">{submission.professorName}</p>
                        <p className="text-xs text-slate-300">{submission.student}</p>
                        <p className="mt-2 text-slate-100">{submission.text}</p>
                        <div className="mt-3 flex gap-2">
                          <button
                            onClick={() => handleApprovePending(idx)}
                            className="flex-1 rounded-lg bg-teal-500 py-1 text-xs font-semibold text-white hover:bg-teal-600"
                          >
                            Approve & Add
                          </button>
                          <button
                            onClick={() => handleDismissPending(idx)}
                            className="flex-1 rounded-lg border border-white/20 py-1 text-xs text-white hover:border-red-400 hover:text-red-200"
                          >
                            Dismiss
                          </button>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </div>
          </section>
        )}

        {searchTerm.trim() && (
          <section className="rounded-3xl border border-white/10 bg-slate-900/40 p-6 shadow-xl shadow-black/30">
            <div className="mb-5 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
              <div>
                <p className="text-xs uppercase tracking-wide text-orange-300">Professor Profiles</p>
                <h2 className="text-2xl font-semibold text-white">Median Classes & Student Reviews</h2>
              </div>
              <div className="rounded-full bg-slate-800 px-4 py-2 text-center text-xs text-slate-200">
                Showing {filteredProfessors.length} profiles
              </div>
            </div>

            {filteredProfessors.length === 0 ? (
              <p className="rounded-2xl border border-dashed border-white/20 bg-white/5 p-6 text-center text-sm text-slate-300">
                No professors match that search yet. Try another name or course.
              </p>
            ) : (
              <div className="grid gap-4 md:grid-cols-2">
                {filteredProfessors.map((professor, idx) => (
                  <article
                    key={professor.name}
                    className="flex flex-col gap-4 rounded-2xl border border-white/10 bg-white/5 p-4 shadow-md shadow-black/20"
                  >
                    <div className="flex items-center justify-between gap-3">
                      <div>
                        <p className="text-xs uppercase tracking-wide text-orange-200">Rank #{idx + 1}</p>
                        <h3 className="text-lg font-semibold text-white">{professor.name}</h3>
                        <p className="text-xs text-slate-400">
                          Median GPA {professor.gpa.toFixed(3)} ¬∑ {professor.courses.length} classes tracked
                        </p>
                      </div>
                      <div className="rounded-2xl bg-slate-900 px-3 py-1 text-sm font-semibold text-green-300">
                        {professor.gpa.toFixed(3)}
                      </div>
                      {isAuthed && (
                        <button
                          onClick={() => handleDeleteProfessor(professor.name)}
                          className="rounded-lg border border-white/20 px-2 py-1 text-[11px] text-red-300 hover:border-red-400 hover:text-white"
                        >
                          Delete Profile
                        </button>
                      )}
                    </div>

                    <div>
                      <p className="text-xs uppercase tracking-wide text-slate-400">Median Classes</p>
                      <div className="mt-2 flex flex-wrap gap-2">
                        {professor.courses.map((course) => (
                          <span
                            key={`${professor.name}-${course}`}
                            className="rounded-full bg-slate-950/40 px-3 py-1 text-xs text-slate-100"
                          >
                            {course}
                          </span>
                        ))}
                      </div>
                    </div>

                    <div className="rounded-2xl border border-white/5 bg-slate-900/50 p-3">
                      <p className="text-xs uppercase tracking-wide text-slate-400">Student Reviews</p>
                      <div className="mt-2 space-y-2 text-sm text-slate-100">
                        {professor.reviews.map((review, reviewIdx) => (
                          <div key={`${professor.name}-review-${reviewIdx}`} className="flex items-start justify-between gap-2">
                            <p className="text-sm text-slate-100">
                              <span className="font-semibold text-orange-200">{review.student}:</span> {review.text}
                            </p>
                            {isAuthed && (
                              <button
                                onClick={() => handleDeleteReview(professor.name, reviewIdx)}
                                className="rounded border border-white/20 px-2 py-1 text-[11px] text-red-300 hover:border-red-400 hover:text-white"
                              >
                                Delete
                              </button>
                            )}
                          </div>
                        ))}
                      </div>
                    </div>
                  </article>
                ))}
              </div>
            )}
          </section>
        )}
      </div>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(<LayupList />);
</script>
  </body>
</html>
